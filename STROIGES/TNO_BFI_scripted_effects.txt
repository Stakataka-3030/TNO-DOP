### Stolen from the BattleForgng :heart: ###

BFI_setup_influence = {
	gng = {
		set_variable = { BFI_gng_Balance = 33 }
		set_variable = { BFI_chi_Balance = 33 }
		set_variable = { BFI_japan_Balance = 33 }
		if = {
			limit = {
				has_game_rule = {
					rule = gng_battle_for_gng
					option = gng_BATTLE_FOR_gng_OFN
				}
			}
			set_variable = { BFI_chi_Balance = 100 }
			set_variable = { BFI_japan_Balance = 0 }
			set_variable = { BFI_gng_Balance = 0 }
		}
		if = {
			limit = {
				has_game_rule = {
					rule = gng_battle_for_gng
					option = gng_BATTLE_FOR_gng_CPS
				}
			}
			set_variable = { BFI_chi_Balance = 0 }
			set_variable = { BFI_japan_Balance = 100 }
			set_variable = { BFI_gng_Balance = 0 }
		}
		if = {
			limit = {
				has_game_rule = {
					rule = gng_battle_for_gng
					option = gng_BATTLE_FOR_gng_ALONE
				}
			}
			set_variable = { BFI_chi_Balance = 0 }
			set_variable = { BFI_japan_Balance = 0 }
			set_variable = { BFI_gng_Balance = 100 }
		}
		BattleForgngTangle_calcXY = yes
		set_variable = { bfi_issues_complete = 0 }
		set_country_flag = bfi_active
		set_country_flag = bfi_gng_select_issue_flag
	}
	chi = {	set_variable = { bfi_points_available = 3 } }
	JAP = {	set_variable = { bfi_points_available = 3 } }
	chi = {	set_variable = { bfi_point_next_issue = 2 } }
	JAP = {	set_variable = { bfi_point_next_issue = 2 } }
	set_variable = { global.bfi_issues_resolved = 0 }
	set_variable = { global.bfi_us_commitment = 0 }
	set_variable = { global.bfi_japan_commitment = 0 }
	chi = {set_variable = { bfi_negotiation_level = -1 } }
	JAP = {set_variable = { bfi_negotiation_level = -1 } }
	gng = {set_variable = { bfi_negotiation_level = -1 } }
	gng = {set_variable = { bfi_current_issue = 0 } }

	gng = { activate_mission = bfi_pick_issue_mission }
	gng = {
		add_to_array = {
			array = BFI_investment_selected
			value = -1
			index = 0
		}
		resize_array = {
			array = BFI_investment_selected
			value = -1
			size = 16
		}
	}
	chi = {
		add_to_array = {
			array = BFI_investment_selected
			value = -1
			index = 0
		}
		resize_array = {
			array = BFI_investment_selected
			value = -1
			size = 16
		}
	}
	JAP = {
		add_to_array = {
			array = BFI_investment_selected
			value = -1
			index = 0
		}
		resize_array = {
			array = BFI_investment_selected
			value = -1
			size = 16
		}
	}
}

BFI_increase_gng_influence_low = {
	gng = {
		add_to_variable = { BFI_gng_Balance = 1 }
		add_to_variable = { BFI_chi_Balance = -0.5 }
		add_to_variable = { BFI_japan_Balance = -0.5 }
		BattleForgngTangle_calcXY = yes
	}
}

BFI_increase_gng_influence_med = {
	gng = {
		add_to_variable = { BFI_gng_Balance = 2 }
		add_to_variable = { BFI_chi_Balance = -1 }
		add_to_variable = { BFI_japan_Balance = -1 }
		BattleForgngTangle_calcXY = yes
	}
}

BFI_increase_gng_influence_high = {
	gng = {
		add_to_variable = { BFI_gng_Balance = 5 }
		add_to_variable = { BFI_chi_Balance = -2.5 }
		add_to_variable = { BFI_japan_Balance = -2.5 }
		BattleForgngTangle_calcXY = yes
	}
}


BFI_increase_japan_influence_low = {
	gng = {
		add_to_variable = { BFI_gng_Balance = -0.5 }
		add_to_variable = { BFI_chi_Balance = -0.5 }
		add_to_variable = { BFI_japan_Balance = 1 }
		BattleForgngTangle_calcXY = yes
	}
}

BFI_increase_japan_influence_med = {
	gng = {
		add_to_variable = { BFI_gng_Balance = -1 }
		add_to_variable = { BFI_chi_Balance = -1 }
		add_to_variable = { BFI_japan_Balance = 2 }
		BattleForgngTangle_calcXY = yes
	}
}

BFI_increase_japan_influence_high = {
	gng = {
		add_to_variable = { BFI_gng_Balance = -2.5 }
		add_to_variable = { BFI_chi_Balance = -2.5 }
		add_to_variable = { BFI_japan_Balance = 5 }
		BattleForgngTangle_calcXY = yes
	}
}


BFI_increase_chi_influence_low = {
	gng = {
		add_to_variable = { BFI_gng_Balance = -0.5 }
		add_to_variable = { BFI_chi_Balance = 1 }
		add_to_variable = { BFI_japan_Balance = -0.5 }
		BattleForgngTangle_calcXY = yes
	}
}

BFI_increase_chi_influence_med = {
	gng = {
		add_to_variable = { BFI_gng_Balance = -1 }
		add_to_variable = { BFI_chi_Balance = 2 }
		add_to_variable = { BFI_japan_Balance = -1 }
		BattleForgngTangle_calcXY = yes
	}
}

BFI_increase_chi_influence_high = {
	gng = {
		add_to_variable = { BFI_gng_Balance = -2.5 }
		add_to_variable = { BFI_chi_Balance = 5 }
		add_to_variable = { BFI_japan_Balance = -2.5 }
		BattleForgngTangle_calcXY = yes
	}
}

# This normalizes the variables
BFI_clamp_influences = {
	gng = {
		if = {
			limit = { check_variable = { BFI_chi_Balance < 0 } }
			set_variable = { BFI_chi_Balance = 0 }
		}
		if = {
			limit = { check_variable = { BFI_japan_Balance < 0 } }
			set_variable = { BFI_japan_Balance = 0 }
		}
		if = {
			limit = { check_variable = { BFI_gng_Balance < 0 } }
			set_variable = { BFI_gng_Balance = 0 }
		}

		## Temp Variable Definition
		# ABC = A+B+C
		set_temp_variable = { ABC = BFI_chi_Balance }
		add_to_temp_variable = { ABC = BFI_japan_Balance }
		add_to_temp_variable = { ABC = BFI_gng_Balance }

		divide_temp_variable = { ABC = 99 }
		divide_variable = { BFI_chi_Balance = ABC }
		divide_variable = { BFI_japan_Balance = ABC }
		divide_variable = { BFI_gng_Balance = ABC }
	}
}

# BattleForgngTangle calcXY
#  - Calculates the x & y values used by BattleForgngTangle to set the location of it's point
#  - The Equation is the following;

BattleForgngTangle_calcXY = {
	gng = {
		BFI_clamp_influences = yes
		if = {
			limit = {
				has_game_rule = {
					rule = gng_battle_for_gng
					option = gng_BATTLE_FOR_gng_OFN
				}
			}
			set_variable = { BFI_chi_Balance = 100 }
			set_variable = { BFI_japan_Balance = 0 }
			set_variable = { BFI_gng_Balance = 0 }
		}
		if = {
			limit = {
				has_game_rule = {
					rule = gng_battle_for_gng
					option = gng_BATTLE_FOR_gng_CPS
				}
			}
			set_variable = { BFI_chi_Balance = 0 }
			set_variable = { BFI_japan_Balance = 100 }
			set_variable = { BFI_gng_Balance = 0 }
		}
		if = {
			limit = {
				has_game_rule = {
					rule = gng_battle_for_gng
					option = gng_BATTLE_FOR_gng_ALONE
				}
			}
			set_variable = { BFI_chi_Balance = 0 }
			set_variable = { BFI_japan_Balance = 0 }
			set_variable = { BFI_gng_Balance = 100 }
		}

		## Temp Variable Definition
		# Done to make life a bit easier
		set_temp_variable = { A = BFI_chi_Balance }
		set_temp_variable = { B = BFI_japan_Balance }
		set_temp_variable = { C = BFI_gng_Balance }
		# ABC = A+B+C
		set_temp_variable = { ABC = A }
		add_to_temp_variable = { ABC = B }
		add_to_temp_variable = { ABC = C }

		## Calc X
		# 1/2 * ((B-A)/(A+B+C))
		set_variable = { BattleForgngTangle_X = B }
		subtract_from_variable = { BattleForgngTangle_X = A }
		divide_variable = { BattleForgngTangle_X = ABC }	#A+B+C

		## Calc Y
		# sqrt(3)/2 * ((C)/(A+B+C))
		set_variable = { BattleForgngTangle_Y = C }
		divide_variable = { BattleForgngTangle_Y = ABC }	#A+B+C

		## Scaling
		# The above calculates the x and y values for a triangle contained in a 1x1 square,
		# that's not per se how large the end triangle will be.
		# So, we scale it up. We can do so by just multiplying x & y by some scale.
		multiply_variable = { BattleForgngTangle_X = 217 }
		multiply_variable = { BattleForgngTangle_Y = 375 }
		multiply_variable = { BattleForgngTangle_Y = -1 }
		add_to_variable = { BattleForgngTangle_Y = 395 } # Account for initial Y-pos
		add_to_variable = { BattleForgngTangle_X = 250 } # Account for initial X-pos
	}
}

BFI_issue_winner_chi = {
	if = { # gng drifts towards independence, but closer to your faction
		limit = {
			check_variable = { chi.bfi_negotiation_level = 1 }
		}
		set_temp_variable = { double_negotiation_level = bfi_negotiation_level } # Effect depends on how much gng put value
		multiply_temp_variable = { double_negotiation_level = 2 }

		add_to_variable = { BFI_gng_Balance = bfi_negotiation_level }
		add_to_variable = { BFI_chi_Balance = bfi_negotiation_level }
		subtract_from_variable = { BFI_japan_Balance = double_negotiation_level }
	}
	else_if = { # gng's independence does not chance, but drifts closer to your faction.
		limit = {
			check_variable = { chi.bfi_negotiation_level = 2 }
		}
		add_to_variable = { BFI_chi_Balance = bfi_negotiation_level }
		subtract_from_variable = { BFI_japan_Balance = bfi_negotiation_level }
	}
	else_if = { # gng's independence goes down at a fantastic rate, only so it can drift closer to your faction.
		limit = { # Both 3 and 5 do the smae
			OR = {
				check_variable = { chi.bfi_negotiation_level = 3 }
				check_variable = { chi.bfi_negotiation_level = 5 }
			}
		}
		set_temp_variable = { double_negotiation_level = bfi_negotiation_level } # Effect depends on how much gng put value
		multiply_temp_variable = { double_negotiation_level = 2 }

		add_to_variable = { BFI_chi_Balance = bfi_negotiation_level }
		subtract_from_variable = { BFI_japan_Balance = bfi_negotiation_level }

		add_to_variable = { BFI_chi_Balance = double_negotiation_level }
		subtract_from_variable = { BFI_gng_Balance = double_negotiation_level }
	}
	else_if = {
		limit = {
			check_variable = { chi.bfi_negotiation_level = 4 } # gng's independence goes down at a fantastic rate, only so it can drift closer to your faction.
		}
		set_temp_variable = { double_negotiation_level = bfi_negotiation_level } # Effect depends on how much gng put value
		multiply_temp_variable = { double_negotiation_level = 2 }

		add_to_variable = { BFI_chi_Balance = double_negotiation_level }
		subtract_from_variable = { BFI_japan_Balance = bfi_negotiation_level }
		subtract_from_variable = { BFI_gng_Balance = bfi_negotiation_level }
	}
}

BFI_issue_winner_jap = {
	if = { # gng drifts towards independence, but closer to your faction
		limit = {
			check_variable = { JAP.bfi_negotiation_level = 1 }
		}
		set_temp_variable = { double_negotiation_level = bfi_negotiation_level } # Effect depends on how much gng put value
		multiply_temp_variable = { double_negotiation_level = 2 }

		add_to_variable = { BFI_gng_Balance = bfi_negotiation_level }
		add_to_variable = { BFI_japan_Balance = bfi_negotiation_level }
		subtract_from_variable = { BFI_chi_Balance = double_negotiation_level }
	}
	else_if = { # gng's independence does not chance, but drifts closer to your faction.
		limit = {
			check_variable = { JAP.bfi_negotiation_level = 2 }
		}
		add_to_variable = { BFI_japan_Balance = bfi_negotiation_level }
		subtract_from_variable = { BFI_chi_Balance = bfi_negotiation_level }
	}
	else_if = { # gng's independence goes down at a fantastic rate, only so it can drift closer to your faction.
		limit = { # Both 3 and 5 do the smae
			OR = {
				check_variable = { JAP.bfi_negotiation_level = 3 }
				check_variable = { JAP.bfi_negotiation_level = 5 }
			}
		}
		set_temp_variable = { double_negotiation_level = bfi_negotiation_level } # Effect depends on how much gng put value
		multiply_temp_variable = { double_negotiation_level = 2 }

		add_to_variable = { BFI_japan_Balance = bfi_negotiation_level }
		subtract_from_variable = { BFI_chi_Balance = bfi_negotiation_level }

		add_to_variable = { BFI_japan_Balance = double_negotiation_level }
		subtract_from_variable = { BFI_gng_Balance = double_negotiation_level }
	}
	else_if = {
		limit = {
			check_variable = { JAP.bfi_negotiation_level = 4 } # gng's independence goes down at a fantastic rate, only so it can drift closer to your faction.
		}
		set_temp_variable = { double_negotiation_level = bfi_negotiation_level } # Effect depends on how much gng put value
		multiply_temp_variable = { double_negotiation_level = 2 }

		add_to_variable = { BFI_japan_Balance = double_negotiation_level }
		subtract_from_variable = { BFI_chi_Balance = bfi_negotiation_level }
		subtract_from_variable = { BFI_gng_Balance = bfi_negotiation_level }
	}
}

BFI_issue_winner_gng = {
	set_temp_variable = { double_negotiation_level = bfi_negotiation_level } # Effect depends on how much gng put value
	multiply_temp_variable = { double_negotiation_level = 2 }

	add_to_variable = { BFI_gng_Balance = double_negotiation_level }
	subtract_from_variable = { BFI_chi_Balance = bfi_negotiation_level }
	subtract_from_variable = { BFI_japan_Balance = bfi_negotiation_level }
}

#this code checks who won by figuring out if the point falls within either the US or Japan triangles
BFI_calculate_issue_winner = {
	add_to_variable = { bfi_negotiation_level = 1 } #Makes the range of results bigger, from 1-5 to 2-6
	if = {
		limit = {
			check_variable = { chi.bfi_negotiation_level > JAP.bfi_negotiation_level }
		}
		BFI_issue_winner_chi = yes
		gng = { country_event = BFI.31 }
		chi = { country_event = BFI.31 }
		JAP = { country_event = BFI.31 }
		} else_if = {
		limit = {
			check_variable = { JAP.bfi_negotiation_level > chi.bfi_negotiation_level }
		}
		BFI_issue_winner_jap = yes
		gng = { country_event = BFI.32 }
		chi = { country_event = BFI.32 }
		JAP = { country_event = BFI.32 }
		} else = {
		BFI_issue_winner_gng = yes
		gng = { country_event = BFI.30 }
		chi = { country_event = BFI.30 }
		JAP = { country_event = BFI.30 }
	}
	BattleForgngTangle_calcXY = yes
}

BFI_gng_joins_winner = {
	if = {
		limit = {
			has_game_rule = {
				rule = gng_battle_for_gng
				option = gng_BATTLE_FOR_gng_OFN
			}
		}
		country_event = { id = BFI.9 days = 2 } #OFN
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = gng_battle_for_gng
				option = gng_BATTLE_FOR_gng_CPS
			}
		}
		country_event = { id = BFI.12 days = 2 } #CPS
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = gng_battle_for_gng
				option = gng_BATTLE_FOR_gng_ALONE
			}
		}
		country_event = { id = BFI.15 days = 2 } #No one
	}
	else_if = {
		limit = { has_global_flag = BFI_chi_Winning }
		country_event = { id = BFI.9 days = 2 } #OFN
	}
	else_if = {
		limit = { has_global_flag = BFI_Japan_Winning }
		country_event = { id = BFI.12 days = 2 } #CPS
	}
	else = {
		country_event = { id = BFI.15 days = 2 } #No one
	}
}

BattleForgng_checkWinner = {
	if = {
		limit = { check_variable = { BFI_chi_Balance > 50 } }
		set_global_flag = BFI_chi_Winning
	}
	else_if = {
		limit = { check_variable = { BFI_japan_Balance > 50 } }
		set_global_flag = BFI_Japan_Winning
	}
	else = {
		set_global_flag = BFI_No_One_Winning
	}
}

# Independent from scopes
BFI_gnglian_american_party_boost = {
	if = {
		limit = {
			gng = {
				OR = {
					has_government = socialist
					has_government = progressivism
					has_government = paternalism
				}
			}
		}
		chi = {
			hidden_effect = {
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }

					subtract_from_variable = { RD_popularity = 0.02}
					add_to_variable = { NPP_popularity = 0.02}
				}
				every_owned_state = {
					limit = {
						can_have_elections_in_state = yes
						check_variable = { nationality = 82 }
					}

					subtract_from_variable = { RD_popularity = 0.02}
					add_to_variable = { NPP_popularity = 0.02}
				}
			}
			custom_effect_tooltip = BFI_chi_NPP_popularity_gnglians_increase_tt
		}
	}
	if = {
		limit = {
			gng = {
				has_government = liberalism
				has_government = conservatism
			}
		}
		chi = {
			hidden_effect = {
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }

					add_to_variable = { RD_popularity = 0.02}
					subtract_from_variable = { NPP_popularity = 0.02}
				}
				every_owned_state = {
					limit = {
						can_have_elections_in_state = yes
						check_variable = { nationality = 82 }
					}

					add_to_variable = { RD_popularity = 0.02}
					subtract_from_variable = { NPP_popularity = 0.02}
				}
			}
		}
		custom_effect_tooltip = BFI_chi_RD_popularity_gnglians_increase_tt
	}
}

# Must be called from gng scope
BFI_gng_joins_OFN = {
	chi = { add_to_faction = gng }
	add_to_array = { global.OFN_members = gng }
	add_ideas = OFN_Independent_Member

	every_country = {
		limit = {
			is_subject_of = gng
		}
		add_to_array = { global.OFN_members = THIS }
		remove_faction_status = yes
		if = {
			limit = {
				OR = {
					has_autonomy_state = autonomy_gng_governate
					has_autonomy_state = autonomy_gng_reliant
					has_autonomy_state = autonomy_gng_hefty_influence
				}
			}
			add_ideas = OFN_Dependent_Member
		}
		else_if = {
			limit = {
				has_autonomy_state = autonomy_gng_associate
			}
			add_ideas = OFN_Independent_Member
		}
	}

	chi = {
		set_temp_variable = { Victory_ID = 6 }
		set_temp_variable = { Victory_Outcome = 4 }
		set_temp_variable = { Victory_Points = 100 }
		Cold_War_GUI_ManipulateVictory = yes
	}
	JAP = {
		set_temp_variable = { Victory_ID = 6 }
		set_temp_variable = { Victory_Outcome = 2 }
		set_temp_variable = { Victory_Points = -100 }
		Cold_War_GUI_ManipulateVictory = yes
	}

	# gnglian econ sphere will still be kept

	# gng Variables
	set_variable = { BFI_OFN_stability = 0 }
	set_variable = { BFI_OFN_pp_gain = 0 }
	set_variable = { BFI_OFN_trade_opinion = 0 }
	set_variable = { BFI_OFN_unit_defence = 0 }
	set_variable = { BFI_OFN_war_support = 0 }
	set_variable = { BFI_OFN_entrenchment = 0 }
	set_variable = { BFI_OFN_research_speed = 0 }
	set_variable = { BFI_OFN_xp_gain_factor = 0 }
	set_variable = { BFI_OFN_army_org = 0 }
	set_variable = { BFI_OFN_xp_gain = 0 }
	set_variable = { BFI_OFN_attrition = 0 }
	set_variable = { BFI_OFN_encryption_factor = 0 }
	set_variable = { BFI_OFN_decryption_factor = 0 }
	set_variable = { BFI_OFN_industrial_equipment = 0 }
	set_variable = { BFI_OFN_industrial_expertise = 0 }
	set_variable = { BFI_OFN_research_facilities = 0 }
	set_variable = { BFI_OFN_academic_base = 0 }
	set_variable = { BFI_OFN_agriculture = 0 }
	set_variable = { BFI_OFN_poverty = 0 }
	set_variable = { BFI_OFN_nuclear_stockpile = 0 }
	set_variable = { BFI_OFN_misc_income = 0 }

	# chi variables
	set_variable = { chi.BFI_chi_stability = 0 }
	set_variable = { chi.BFI_chi_pp_gain = 0 }
	set_variable = { chi.BFI_chi_fuel_gain = 0 }
	set_variable = { chi.BFI_chi_war_support = 0 }
	set_variable = { chi.BFI_chi_air_range = 0 }
	set_variable = { chi.BFI_chi_research_speed = 0 }
	set_variable = { chi.BFI_chi_xp_gain_factor = 0 }
	set_variable = { chi.BFI_chi_army_org = 0 }
	set_variable = { chi.BFI_chi_xp_gain = 0 }
	set_variable = { chi.BFI_chi_attrition = 0 }
	set_variable = { chi.BFI_chi_research_facilities = 0 }
	set_variable = { chi.BFI_chi_industrial_equipment = 0 }
	set_variable = { chi.BFI_chi_industrial_expertise = 0 }
	set_variable = { chi.BFI_chi_poverty = 0 }
	set_variable = { chi.BFI_chi_misc_income = 0 }
	set_variable = { chi.BFI_chi_misc_costs = 0 }

	if = {
		limit = { check_variable = { chi.BFI_investment_selected^1 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^1 = 1 } }
			add_to_variable = { BFI_OFN_stability = 0.025 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^1 = 2 } }
			add_to_variable = { BFI_OFN_stability = 0.025 }
			add_to_variable = { BFI_OFN_pp_gain = 0.05 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^1 = 3 } }
			add_to_variable = { BFI_OFN_stability = 0.05 }
			add_to_variable = { BFI_OFN_pp_gain = 0.05 }
			add_to_variable = { chi.BFI_chi_stability = 0.05 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^1 = 4 } }
			add_to_variable = { BFI_OFN_stability = 0.075 }
			add_to_variable = { BFI_OFN_pp_gain = 0.05 }
			add_to_variable = { chi.BFI_chi_stability = 0.05 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^1 = 5 } }
			add_to_variable = { BFI_OFN_stability = 0.075 }
			add_to_variable = { BFI_OFN_pp_gain = 0.1 }
			add_to_variable = { chi.BFI_chi_stability = 0.05 }
			add_to_variable = { chi.BFI_chi_pp_gain = 0.05 }
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^2 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^2 = 1 } }
			add_to_variable = { BFI_OFN_trade_opinion = 0.1 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^2 = 2 } }
			add_to_variable = { BFI_OFN_trade_opinion = 0.1 }
			multiply_variable = { GDP = 1.005 } #already converted to billion
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^2 = 3 } }
			add_to_variable = { BFI_OFN_trade_opinion = 0.2 }
			multiply_variable = { GDP = 1.005 } #already converted to billion
			chi = {
				multiply_variable = { GDP = 1.005 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^2 = 4 } }
			add_to_variable = { BFI_OFN_trade_opinion = 0.4 }
			multiply_variable = { GDP = 1.005 } #already converted to billion
			chi = {
				multiply_variable = { GDP = 1.005 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^2 = 5 } }
			add_to_variable = { BFI_OFN_trade_opinion = 0.6 }
			multiply_variable = { GDP = 1.005 } #already converted to billion
			chi = {
				multiply_variable = { GDP = 1.005 } #already converted to billion
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^3 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^3 = 1 } }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.05 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^3 = 2 } }
			add_to_variable = { BFI_OFN_misc_income = 0.1 } #already converted to billion
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
			}
			add_opinion_modifier = {
				target = chi
				modifier = BFI_tourism_relations_2
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_tourism_relations_2
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^3 = 3 } }
			add_to_variable = { BFI_OFN_misc_income = 0.15 } #already converted to billion
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.15 } #already converted to billion
			}
			add_opinion_modifier = {
				target = chi
				modifier = BFI_tourism_relations_5
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_tourism_relations_5
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^3 = 4 } }
			add_to_variable = { BFI_OFN_misc_income = 0.2 } #already converted to billion
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.2 } #already converted to billion
			}
			add_opinion_modifier = {
				target = chi
				modifier = BFI_tourism_relations_10
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_tourism_relations_10
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^3 = 5 } }
			add_to_variable = { BFI_OFN_misc_income = 0.25 } #already converted to billion
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.25 } #already converted to billion
			}
			add_opinion_modifier = {
				target = chi
				modifier = BFI_tourism_relations_10
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_tourism_relations_10
			}
			multiply_variable = { GDP = 1.005 } #already converted to billion
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^4 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^4 = 1 } }
			add_to_variable = { BFI_OFN_industrial_equipment = 0.5 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^4 = 2 } }
			add_to_variable = { BFI_OFN_industrial_equipment = 1 }
			chi = {
				add_to_variable = { BFI_chi_misc_costs = 0.05 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^4 = 3 } }
			add_to_variable = { BFI_OFN_industrial_equipment = 1 }
			add_to_variable = { BFI_OFN_industrial_expertise = 0.5 }
			chi = {
				add_to_variable = { BFI_chi_misc_costs = 0.05 } #already converted to billion
				add_to_variable = { BFI_chi_industrial_expertise = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^4 = 4 } }
			add_to_variable = { BFI_OFN_industrial_equipment = 1.5 }
			add_to_variable = { BFI_OFN_industrial_expertise = 1 }
			chi = {
				add_to_variable = { BFI_chi_misc_costs = 0.1 } #already converted to billion
				add_to_variable = { BFI_chi_industrial_expertise = 1 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^4 = 5 } }
			add_to_variable = { BFI_OFN_industrial_equipment = 2 }
			add_to_variable = { BFI_OFN_industrial_expertise = 1 }
			chi = {
				add_to_variable = { BFI_chi_misc_costs = 0.1 } #already converted to billion
				add_to_variable = { BFI_chi_industrial_expertise = 1 }
				multiply_variable = { GDP = 1.005 } #already converted to billion
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^5 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^5 = 1 } }
			add_to_variable = { BFI_OFN_research_facilities = 0.5 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^5 = 2 } }
			add_to_variable = { BFI_OFN_research_facilities = 1 }
			add_to_variable = { BFI_OFN_academic_base = 0.5 }
			chi = {
				add_to_variable = { BFI_chi_research_facilities = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^5 = 3 } }
			add_to_variable = { BFI_OFN_research_facilities = 1.5 }
			add_to_variable = { BFI_OFN_academic_base = 0.5 }
			chi = {
				add_to_variable = { BFI_chi_research_facilities = 0.5 }
				add_to_variable = { BFI_chi_pp_gain = 0.05 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^5 = 4 } }
			add_to_variable = { BFI_OFN_research_facilities = 1.5 }
			add_to_variable = { BFI_OFN_academic_base = 1 }
			chi = {
				add_to_variable = { BFI_chi_research_facilities = 1 }
				add_to_variable = { BFI_chi_pp_gain = 0.05 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^5 = 5 } }
			add_to_variable = { BFI_OFN_research_facilities = 2 }
			add_to_variable = { BFI_OFN_academic_base = 1 }
			chi = {
				add_to_variable = { BFI_chi_research_facilities = 1 }
				add_to_variable = { BFI_chi_pp_gain = 0.1 }
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^6 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^6 = 1 } }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^6 = 2 } }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
			add_to_variable = { BFI_OFN_agriculture = 0.5 }
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.075 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^6 = 3 } }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
			add_to_variable = { BFI_OFN_agriculture = 1 }
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.15 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^6 = 4 } }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
			add_to_variable = { BFI_OFN_agriculture = 1.5 }
			add_to_variable = { BFI_OFN_poverty = 0.025 }
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.225 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^6 = 5 } }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
			add_to_variable = { BFI_OFN_agriculture = 2 }
			add_to_variable = { BFI_OFN_poverty = 0.05 }
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.3 } #already converted to billion
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^7 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^7 = 1 } }
			add_to_variable = { BFI_OFN_misc_income = 0.1 } #already converted to billion
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^7 = 2 } }
			add_to_variable = { BFI_OFN_misc_income = 0.2 } #already converted to billion
			add_to_variable = { chi.BFI_chi_fuel_gain = 0.04 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^7 = 3 } }
			add_to_variable = { BFI_OFN_misc_income = 0.3 } #already converted to billion
			add_to_variable = { BFI_OFN_industrial_equipment = 0.5 }
			add_to_variable = { chi.BFI_chi_fuel_gain = 0.08 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^7 = 4 } }
			add_to_variable = { BFI_OFN_misc_income = 0.4 } #already converted to billion
			add_to_variable = { BFI_OFN_industrial_equipment = 0.5 }
			add_to_variable = { chi.BFI_chi_fuel_gain = 0.12 }
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^7 = 5 } }
			add_to_variable = { BFI_OFN_misc_income = 0.5 } #already converted to billion
			add_to_variable = { BFI_OFN_industrial_equipment = 1 }
			add_to_variable = { chi.BFI_chi_fuel_gain = 0.16 }
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
				multiply_variable = { GDP = 1.005 } #already converted to billion
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^8 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^8 = 1 } }
			add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_15
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_15
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^8 = 2 } }
			add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_20
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_20
			}
			add_to_variable = { BFI_OFN_stability = 0.05 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^8 = 3 } }
			add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_30
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_30
			}
			add_to_variable = { BFI_OFN_stability = 0.075 }
			BFI_gnglian_american_party_boost = yes
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^8 = 4 } }
			add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_30
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_30
			}
			add_to_variable = { BFI_OFN_stability = 0.1 }
			add_to_variable = { BFI_OFN_pp_gain = 0.05 }
			BFI_gnglian_american_party_boost = yes
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^8 = 5 } }
			add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_30
			}
			reverse_add_opinion_modifier = {
				target = chi
				modifier = BFI_diplo_accords_30
			}
			add_to_variable = { BFI_OFN_stability = 0.1 }
			add_to_variable = { BFI_OFN_pp_gain = 0.1 }
			add_to_variable = { chi.BFI_chi_stability = 0.05 }
			BFI_gnglian_american_party_boost = yes
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^9 > 0 } }
		every_country = {
			limit = { is_subject_of = gng }
			add_dynamic_modifier = { modifier = BFI_chi_gnglosphere_in_the_OFN }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^9 = 1 } }
			every_country = {
				limit = { is_subject_of = gng }
				subtract_from_variable = { BFI_OFN_consumer_goods = 0.01 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^9 = 2 } }
			every_country = {
				limit = { is_subject_of = gng }
				subtract_from_variable = { BFI_OFN_consumer_goods = 0.03 }
			}
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^9 = 3 } }
			every_country = {
				limit = { is_subject_of = gng }
				subtract_from_variable = { BFI_OFN_consumer_goods = 0.05 }
				add_to_variable = { BFI_OFN_industrial_equipment = 0.5 }
				custom_effect_tooltip = improve_industrial_equipment_small
			}
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.2 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^9 = 4 } }
			every_country = {
				limit = { is_subject_of = gng }
				subtract_from_variable = { BFI_OFN_consumer_goods = 0.05 }
				add_to_variable = { BFI_OFN_industrial_equipment = 0.5 }
				multiply_variable = { GDP = 1.005 } #already converted to billion
			}
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.2 } #already converted to billion
				add_to_variable = { BFI_chi_industrial_equipment = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^9 = 5 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				subtract_from_variable = { BFI_OFN_consumer_goods = 0.05 }
				add_to_variable = { BFI_OFN_industrial_equipment = 1 }
				add_to_variable = { BFI_OFN_agriculture = 1 }
				multiply_variable = { GDP = 1.005 } #already converted to billion
			}
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.3 } #already converted to billion
				add_to_variable = { BFI_chi_industrial_equipment = 1 }
				add_to_variable = { BFI_chi_agriculture = 0.5 }
				multiply_variable = { GDP = 1.005 } #already converted to billion
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^10 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^10 = 1 } }
			add_to_variable = { BFI_OFN_unit_defence = 0.025 }
			add_to_variable = { BFI_OFN_war_support = 0.025 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^10 = 2 } }
			add_to_variable = { BFI_OFN_unit_defence = 0.05 }
			add_to_variable = { BFI_OFN_war_support = 0.05 }
			add_to_variable = { chi.BFI_chi_war_support = 0.025 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^10 = 3 } }
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			add_to_variable = { BFI_OFN_unit_defence = 0.05 }
			add_to_variable = { BFI_OFN_war_support = 0.05 }
			add_to_variable = { BFI_OFN_entrenchment = 0.03 }
			add_to_variable = { chi.BFI_chi_war_support = 0.05 }
			chi = {
				add_doctrine_cost_reduction = {
					name = land_doc_bonus
					cost_reduction = 0.5
					uses = 1
					category = land_doctrine
				}
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^10 = 4 } }
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
			add_to_variable = { BFI_OFN_unit_defence = 0.075 }
			add_to_variable = { BFI_OFN_war_support = 0.075 }
			add_to_variable = { BFI_OFN_entrenchment = 0.05 }
			add_to_variable = { chi.BFI_chi_war_support = 0.05 }
			add_to_variable = { chi.BFI_chi_air_range = 0.05 }
			chi = {
				add_doctrine_cost_reduction = {
					name = land_doc_bonus
					cost_reduction = 0.5
					uses = 2
					category = land_doctrine
				}
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^10 = 5 } }
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
			add_to_variable = { BFI_OFN_unit_defence = 0.075 }
			add_to_variable = { BFI_OFN_war_support = 0.075 }
			add_to_variable = { BFI_OFN_entrenchment = 0.1 }
			add_to_variable = { chi.BFI_chi_war_support = 0.05 }
			add_to_variable = { chi.BFI_chi_air_range = 0.1 }
			chi = {
				add_doctrine_cost_reduction = {
					name = land_doc_bonus
					cost_reduction = 0.5
					uses = 2
					category = land_doctrine
				}
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^11 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^11 = 1 } }
			add_ideas = BFI_OFN_engines_of_war_1
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^11 = 2 } }
			add_ideas = BFI_OFN_engines_of_war_2
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^11 = 3 } }
			add_ideas = BFI_OFN_engines_of_war_2
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
				add_ideas = BFI_OFN_engines_of_war_2
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^11 = 4 } }
			add_ideas = BFI_OFN_engines_of_war_3
			add_to_variable = { BFI_OFN_industrial_equipment = 0.5 }
			chi = {
				add_ideas = BFI_OFN_engines_of_war_3
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^11 = 5 } }
			add_ideas = BFI_OFN_engines_of_war_4
			add_to_variable = { BFI_OFN_industrial_equipment = 0.5 }
			chi = {
				add_ideas = BFI_OFN_engines_of_war_4
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^12 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^12 = 1 } }
			set_temp_variable = { temp_modifier = 15 }
			chi = { add_to_trade_modifier_PREV = yes }
			chi = { gng = { add_to_trade_modifier_PREV = yes } }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^12 = 2 } }
			set_temp_variable = { temp_modifier = 20 }
			chi = { add_to_trade_modifier_PREV = yes }
			chi = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_OFN_poverty = 0.025 }
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.1 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^12 = 3 } }
			set_temp_variable = { temp_modifier = 30 }
			chi = { add_to_trade_modifier_PREV = yes }
			chi = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_OFN_poverty = 0.025 }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.2 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^12 = 4 } }
			set_temp_variable = { temp_modifier = 40 }
			chi = { add_to_trade_modifier_PREV = yes }
			chi = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_OFN_poverty = 0.025 }
			add_to_variable = { BFI_OFN_misc_income = 0.1 } #already converted to billion
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.3 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^12 = 5 } }
			set_temp_variable = { temp_modifier = 60 }
			chi = { add_to_trade_modifier_PREV = yes }
			chi = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_OFN_poverty = 0.05 }
			add_to_variable = { BFI_OFN_misc_income = 0.15 } #already converted to billion
			chi = {
				add_to_variable = { BFI_chi_misc_income = 0.3 } #already converted to billion
				add_to_variable = { BFI_chi_poverty = 0.025 }
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^13 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^13 = 1 } }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^13 = 2 } }
			add_to_variable = { BFI_OFN_misc_income = 0.05 } #already converted to billion
			add_to_variable = { BFI_OFN_research_speed = 0.01 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^13 = 3 } }
			add_to_variable = { BFI_OFN_misc_income = 0.1 } #already converted to billion
			add_to_variable = { BFI_OFN_research_speed = 0.03 }
			chi = {
				add_to_variable = { BFI_chi_research_speed = 0.01 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^13 = 4 } }
			add_to_variable = { BFI_OFN_misc_income = 0.1 } #already converted to billion
			add_to_variable = { BFI_OFN_research_speed = 0.03 }
			add_to_variable = { BFI_OFN_research_facilities = 0.5 }
			add_to_variable = { BFI_OFN_nuclear_stockpile = 1 }
			chi = {
				add_to_variable = { BFI_chi_research_speed = 0.03 }
				add_to_variable = { BFI_chi_research_facilities = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^13 = 5 } }
			add_to_variable = { BFI_OFN_misc_income = 0.15 } #already converted to billion
			add_to_variable = { BFI_OFN_research_speed = 0.05 }
			add_to_variable = { BFI_OFN_research_facilities = 1 }
			add_to_variable = { BFI_OFN_nuclear_stockpile = 2 }
			chi = {
				add_to_variable = { BFI_chi_research_speed = 0.03 }
				add_to_variable = { BFI_chi_research_facilities = 1 }
			}
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^14 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^14 = 1 } }
			add_to_variable = { BFI_OFN_xp_gain_factor = 0.1 }
			add_to_variable = { chi.BFI_chi_xp_gain_factor = 0.1 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^14 = 2 } }
			add_to_variable = { BFI_OFN_xp_gain_factor = 0.1 }
			add_to_variable = { BFI_OFN_army_org = 0.025 }
			add_to_variable = { chi.BFI_chi_xp_gain_factor = 0.1 }
			add_to_variable = { chi.BFI_chi_army_org = 0.025 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^14 = 3 } }
			add_to_variable = { BFI_OFN_xp_gain_factor = 0.1 }
			add_to_variable = { BFI_OFN_xp_gain = 0.02 }
			add_to_variable = { BFI_OFN_army_org = 0.05 }
			add_to_variable = { chi.BFI_chi_xp_gain_factor = 0.1 }
			add_to_variable = { chi.BFI_chi_xp_gain = 0.02 }
			add_to_variable = { chi.BFI_chi_army_org = 0.05 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^14 = 4 } }
			add_to_variable = { BFI_OFN_xp_gain_factor = 0.1 }
			add_to_variable = { BFI_OFN_xp_gain = 0.02 }
			add_to_variable = { BFI_OFN_army_org = 0.05 }
			subtract_from_variable = { BFI_OFN_attrition = 0.025 }
			add_to_variable = { chi.BFI_chi_xp_gain_factor = 0.1 }
			add_to_variable = { chi.BFI_chi_xp_gain = 0.02 }
			add_to_variable = { chi.BFI_chi_army_org = 0.05 }
			subtract_from_variable = { chi.BFI_chi_attrition = 0.025 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^14 = 5 } }
			add_to_variable = { BFI_OFN_xp_gain_factor = 0.1 }
			add_to_variable = { BFI_OFN_xp_gain = 0.02 }
			add_to_variable = { BFI_OFN_army_org = 0.05 }
			subtract_from_variable = { BFI_OFN_attrition = 0.05 }
			add_to_variable = { BFI_OFN_army_professionalism = 0.5 }
			add_to_variable = { chi.BFI_chi_xp_gain_factor = 0.1 }
			add_to_variable = { chi.BFI_chi_xp_gain = 0.02 }
			add_to_variable = { chi.BFI_chi_army_org = 0.05 }
			subtract_from_variable = { chi.BFI_chi_attrition = 0.05 }
			add_to_variable = { chi.BFI_chi_army_professionalism = 0.5 }
		}
	}
	if = {
		limit = { check_variable = { chi.BFI_investment_selected^15 > 0 } }
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^15 = 1 } }
			add_to_variable = { BFI_OFN_encryption_factor = 0.05 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^15 = 2 } }
			add_to_variable = { BFI_OFN_encryption_factor = 0.04 }
			add_to_variable = { BFI_OFN_decryption_factor = 0.03 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^15 = 3 } }
			add_to_variable = { BFI_OFN_encryption_factor = 0.03 }
			add_to_variable = { BFI_OFN_decryption_factor = 0.06 }
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^15 = 4 } }
			add_to_variable = { BFI_OFN_encryption_factor = 0.02 }
			add_to_variable = { BFI_OFN_decryption_factor = 0.09 }
			set_temp_variable = { NetworkChange = 1 } Espionage_AddNetworkStrength_Europe = yes
		}
		if = {
			limit = { check_variable = { chi.BFI_investment_selected^15 = 5 } }
			add_to_variable = { BFI_OFN_encryption_factor = 0.01 }
			add_to_variable = { BFI_OFN_decryption_factor = 0.12 }
			set_temp_variable = { NetworkChange = 1 } Espionage_AddNetworkStrength_Europe = yes
			set_temp_variable = { ExpertiseChange = 10 } Espionage_AddExpertise = yes
		}
	}

	add_dynamic_modifier = { modifier = BFI_gng_in_the_OFN }
	chi = { add_dynamic_modifier = { modifier = BFI_chi_gng_in_the_OFN } }
}

# Must be called from gng scope
BFI_gng_joins_CPS = {
	JAP = { add_to_faction = gng }
	add_ideas = {
		Sphere_Coequal
	}
	# gnglian econ sphere will still be kept

	every_country = {
		limit = {
			is_subject_of = gng
		}
		remove_faction_status = yes
		if = {
			limit = {
				OR = {
					has_autonomy_state = autonomy_gng_governate
					has_autonomy_state = autonomy_gng_reliant
					has_autonomy_state = autonomy_gng_hefty_influence
				}
			}
			add_ideas = Sphere_Economic_Dependent
		}
		else_if = {
			limit = {
				has_autonomy_state = autonomy_gng_associate
			}
			add_ideas = Sphere_Coequal
		}
	}

	chi = {
		set_temp_variable = { Victory_ID = 6 }
		set_temp_variable = { Victory_Outcome = 2 }
		set_temp_variable = { Victory_Points = -100 }
		Cold_War_GUI_ManipulateVictory = yes
	}
	JAP = {
		set_temp_variable = { Victory_ID = 6 }
		set_temp_variable = { Victory_Outcome = 4 }
		set_temp_variable = { Victory_Points = 100 }
		Cold_War_GUI_ManipulateVictory = yes
	}

	# gng Vars
	set_variable = { BFI_CPS_pp_gain = 0 }
	set_variable = { BFI_CPS_stability = 0 }

	# Japan Vars
	set_variable = { BFI_JAP_pp_gain = 0 }
	set_variable = { BFI_JAP_stability = 0 }

	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^1 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^1 = 1 } }
			add_to_variable = { BFI_CPS_misc_income = 0.05 } #already converted to billion
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^1 = 2 } }
			add_to_variable = { BFI_CPS_misc_income = 0.1 } #already converted to billion
			add_to_variable = { BFI_CPS_pp_gain = 0.03 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.01 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^1 = 3 } }
			add_to_variable = { BFI_CPS_misc_income = 0.15 } #already converted to billion
			add_to_variable = { BFI_CPS_pp_gain = 0.06 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.03 }
				add_to_variable = { BFI_JAP_stability = 0.025 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^1 = 4 } }
			add_to_variable = { BFI_CPS_misc_income = 0.2 } #already converted to billion
			add_to_variable = { BFI_CPS_pp_gain = 0.09 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.05 }
				add_to_variable = { BFI_JAP_stability = 0.05 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^1 = 5 } }
			add_to_variable = { BFI_CPS_misc_income = 0.25 } #already converted to billion
			add_to_variable = { BFI_CPS_pp_gain = 0.12 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.07 }
				add_to_variable = { BFI_JAP_stability = 0.075 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^2 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^2 = 1 } }
			add_to_variable = { BFI_CPS_misc_income = 0.05 } #already converted to billion
			set_temp_variable = { temp_modifier = 10 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^2 = 2 } }
			add_to_variable = { BFI_CPS_misc_income = 0.1 } #already converted to billion
			set_temp_variable = { temp_modifier = 20 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_CPS_industrial_expertise = 0.5 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^2 = 3 } }
			add_to_variable = { BFI_CPS_misc_income = 0.15 } #already converted to billion
			set_temp_variable = { temp_modifier = 30 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_CPS_industrial_expertise = 1 }
			JAP = {
				subtract_from_variable = { BFI_JAP_consumer_goods = 0.01 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^2 = 4 } }
			add_to_variable = { BFI_CPS_misc_income = 0.2 } #already converted to billion
			multiply_variable = { GDP = 1.005 } #already converted to billion
			set_temp_variable = { temp_modifier = 45 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_CPS_industrial_expertise = 1 }
			JAP = {
				subtract_from_variable = { BFI_JAP_consumer_goods = 0.02 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^2 = 5 } }
			add_to_variable = { BFI_CPS_misc_income = 0.25 } #already converted to billion
			multiply_variable = { GDP = 1.005 } #already converted to billion
			set_temp_variable = { temp_modifier = 60 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_CPS_industrial_expertise = 1.5 }
			JAP = {
				subtract_from_variable = { BFI_JAP_consumer_goods = 0.03 }
				add_to_variable = { BFI_JAP_poverty = 0.025 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^3 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^3 = 1 } }
			add_to_variable = { BFI_CPS_misc_income = 0.075 } #already converted to billion
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^3 = 2 } }
			add_to_variable = { BFI_CPS_misc_income = 0.15 } #already converted to billion
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_tourism_relations_5
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_tourism_relations_5
			}
			add_to_variable = { BFI_CPS_stability = 0.025 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^3 = 3 } }
			add_to_variable = { BFI_CPS_misc_income = 0.225 } #already converted to billion
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_tourism_relations_10
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_tourism_relations_10
			}
			add_to_variable = { BFI_CPS_stability = 0.05 }
			add_to_variable = { BFI_CPS_pp_gain = 0.025 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.025 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^3 = 4 } }
			add_to_variable = { BFI_CPS_misc_income = 0.3 } #already converted to billion
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_tourism_relations_20
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_tourism_relations_20
			}
			add_to_variable = { BFI_CPS_stability = 0.075 }
			add_to_variable = { BFI_CPS_pp_gain = 0.05 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.05 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^3 = 5 } }
			add_to_variable = { BFI_CPS_misc_income = 0.375 } #already converted to billion
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_tourism_relations_30
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_tourism_relations_30
			}
			add_to_variable = { BFI_CPS_stability = 0.1 }
			add_to_variable = { BFI_CPS_pp_gain = 0.075 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.075 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^4 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^4 = 1 } }
			add_to_variable = { BFI_CPS_industrial_equipment = 1 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^4 = 2 } }
			add_to_variable = { BFI_CPS_industrial_equipment = 1.5 }
			JAP = {
				add_to_variable = { BFI_JAP_industrial_expertise = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^4 = 3 } }
			add_to_variable = { BFI_CPS_industrial_equipment = 2 }
			add_to_variable = { BFI_CPS_efficency_growth = 0.025 }
			JAP = {
				add_to_variable = { BFI_JAP_industrial_expertise = 1 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^4 = 4 } }
			add_to_variable = { BFI_CPS_industrial_equipment = 2.5 }
			add_to_variable = { BFI_CPS_efficency_growth = 0.05 }
			JAP = {
				add_to_variable = { BFI_JAP_industrial_expertise = 1.5 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^4 = 5 } }
			add_to_variable = { BFI_CPS_industrial_equipment = 3 }
			add_to_variable = { BFI_CPS_efficency_growth = 0.075 }
			JAP = {
				add_to_variable = { BFI_JAP_industrial_expertise = 2 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^5 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^5 = 1 } }
			add_to_variable = { BFI_CPS_research_facilities = 0.5 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^5 = 2 } }
			add_to_variable = { BFI_CPS_research_facilities = 1 }
			JAP = {
				add_to_variable = { BFI_JAP_research_speed = 0.01 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^5 = 3 } }
			add_to_variable = { BFI_CPS_research_facilities = 1 }
			add_to_variable = { BFI_CPS_academic_base = 0.5 }
			JAP = {
				add_to_variable = { BFI_JAP_research_speed = 0.03 }
				add_to_variable = { BFI_JAP_academic_base = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^5 = 4 } }
			add_to_variable = { BFI_CPS_research_facilities = 1.5 }
			add_to_variable = { BFI_CPS_academic_base = 1 }
			JAP = {
				add_to_variable = { BFI_JAP_research_speed = 0.03 }
				add_to_variable = { BFI_JAP_academic_base = 1 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^5 = 5 } }
			add_to_variable = { BFI_CPS_research_facilities = 2 }
			add_to_variable = { BFI_CPS_academic_base = 2 }
			JAP = {
				add_to_variable = { BFI_JAP_research_speed = 0.03 }
				add_to_variable = { BFI_JAP_academic_base = 1.5 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^6 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^6 = 1 } }
			add_to_variable = { BFI_CPS_monthly_population = 0.02 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.075 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^6 = 2 } }
			add_to_variable = { BFI_CPS_monthly_population = 0.04 }
			add_to_variable = { BFI_CPS_agriculture = 0.5 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.15 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^6 = 3 } }
			add_to_variable = { BFI_CPS_monthly_population = 0.06 }
			add_to_variable = { BFI_CPS_agriculture = 1 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.225 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^6 = 4 } }
			add_to_variable = { BFI_CPS_monthly_population = 0.08 }
			add_to_variable = { BFI_CPS_agriculture = 1.5 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.3 } #already converted to billion
				add_to_variable = { BFI_JAP_agriculture = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^6 = 5 } }
			add_to_variable = { BFI_CPS_monthly_population = 0.1 }
			add_to_variable = { BFI_CPS_agriculture = 2 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.375 } #already converted to billion
				add_to_variable = { BFI_JAP_agriculture = 1 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^7 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^7 = 1 } }
			add_to_variable = { BFI_CPS_min_export = 0.04 }
			add_to_variable = { BFI_CPS_resources_gain = 0.04 }
			set_temp_variable = { money_reserves_temp = 0.2 }
			econ_money_reserves_change_raw_money = yes
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^7 = 2 } }
			add_to_variable = { BFI_CPS_min_export = 0.08 }
			add_to_variable = { BFI_CPS_resources_gain = 0.08 }
			add_to_variable = { BFI_CPS_misc_income = 0.05 } #already converted to billion
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^7 = 3 } }
			add_to_variable = { BFI_CPS_min_export = 0.12 }
			add_to_variable = { BFI_CPS_resources_gain = 0.12 }
			add_to_variable = { BFI_CPS_misc_income = 0.1 } #already converted to billion
			JAP = {
				add_to_variable = { BFI_JAP_fuel_gain = 0.05 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^7 = 4 } }
			add_to_variable = { BFI_CPS_min_export = 0.16 }
			add_to_variable = { BFI_CPS_resources_gain = 0.16 }
			add_to_variable = { BFI_CPS_misc_income = 0.15 } #already converted to billion
			JAP = {
				add_to_variable = { BFI_JAP_fuel_gain = 0.1 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^7 = 5 } }
			add_to_variable = { BFI_CPS_min_export = 0.20 }
			add_to_variable = { BFI_CPS_resources_gain = 0.20 }
			add_to_variable = { BFI_CPS_misc_income = 0.2 } #already converted to billion
			JAP = {
				add_to_variable = { BFI_JAP_fuel_gain = 0.15 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^8 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^8 = 1 } }
			add_to_variable = { BFI_CPS_pp_gain = 0.05 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^8 = 2 } }
			add_to_variable = { BFI_CPS_pp_gain = 0.1 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^8 = 3 } }
			add_to_variable = { BFI_CPS_pp_gain = 0.1 }
			add_to_variable = { BFI_CPS_stability = 0.05 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.02 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^8 = 4 } }
			add_to_variable = { BFI_CPS_pp_gain = 0.1 }
			add_to_variable = { BFI_CPS_stability = 0.1 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.04 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^8 = 5 } }
			add_to_variable = { BFI_CPS_pp_gain = 0.1 }
			add_to_variable = { BFI_CPS_stability = 0.1 }
			add_to_variable = { BFI_CPS_war_support = 0.1 }
			JAP = {
				add_to_variable = { BFI_JAP_pp_gain = 0.06 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^9 > 0 } }
		every_country = {
			limit = {
				is_subject_of = gng
			}
			add_dynamic_modifier = { modifier = BFI_JAP_gnglosphere_in_the_CPS }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^9 = 1 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				subtract_from_variable = { BFI_CPS_consumer_goods = 0.01 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^9 = 2 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				subtract_from_variable = { BFI_CPS_consumer_goods = 0.02 }
				add_to_variable = { BFI_CPS_construction_speed = 0.05 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^9 = 3 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				subtract_from_variable = { BFI_CPS_consumer_goods = 0.03 }
				add_to_variable = { BFI_CPS_construction_speed = 0.1 }
			}
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.1 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^9 = 4 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				subtract_from_variable = { BFI_CPS_consumer_goods = 0.04 }
				add_to_variable = { BFI_CPS_construction_speed = 0.15 }
			}
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.2 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^9 = 5 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				subtract_from_variable = { BFI_CPS_consumer_goods = 0.05 }
				add_to_variable = { BFI_CPS_construction_speed = 0.2 }
			}
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.2 } #already converted to billion
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^10 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^10 = 1 } }
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_10
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_10
			}
			add_to_variable = { BFI_CPS_defence = 0.025 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^10 = 2 } }
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_20
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_20
			}
			add_to_variable = { BFI_CPS_defence = 0.05 }
			add_to_variable = { BFI_CPS_org = 0.025 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^10 = 3 } }
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_30
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_30
			}
			add_to_variable = { BFI_CPS_defence = 0.075 }
			add_to_variable = { BFI_CPS_org = 0.05 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^10 = 4 } }
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_40
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_40
			}
			add_to_variable = { BFI_CPS_defence = 0.1 }
			add_to_variable = { BFI_CPS_org = 0.075 }
			add_to_variable = { BFI_CPS_army_professionalism = 0.5 }
			JAP = {
				add_to_variable = { BFI_JAP_army_professionalism = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^10 = 5 } }
			add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_50
			}
			reverse_add_opinion_modifier = {
				target = JAP
				modifier = BFI_enemy_of_enemy_50
			}
			add_to_variable = { BFI_CPS_defence = 0.1 }
			add_to_variable = { BFI_CPS_org = 0.1 }
			add_to_variable = { BFI_CPS_army_professionalism = 1 }
			add_to_variable = { BFI_CPS_entrenchment_speed = 0.05 }
			JAP = {
				add_to_variable = { BFI_JAP_army_professionalism = 1 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^11 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^11 = 1 } }
			add_to_variable = { BFI_CPS_industrial_capacity = 0.02 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.075 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^11 = 2 } }
			add_to_variable = { BFI_CPS_industrial_capacity = 0.04 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.15 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^11 = 3 } }
			add_to_variable = { BFI_CPS_industrial_capacity = 0.06 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.225 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^11 = 4 } }
			add_to_variable = { BFI_CPS_industrial_capacity = 0.08 }
			add_to_variable = { BFI_CPS_industrial_equipment = 0.5 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.3 } #already converted to billion
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^11 = 5 } }
			add_to_variable = { BFI_CPS_industrial_capacity = 0.1 }
			add_to_variable = { BFI_CPS_industrial_equipment = 1 }
			JAP = {
				add_to_variable = { BFI_JAP_misc_income = 0.375 } #already converted to billion
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^12 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^12 = 1 } }
			set_temp_variable = { temp_modifier = 20 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^12 = 2 } }
			set_temp_variable = { temp_modifier = 30 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_CPS_poverty = 0.025 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^12 = 3 } }
			set_temp_variable = { temp_modifier = 40 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_CPS_poverty = 0.05 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^12 = 4 } }
			set_temp_variable = { temp_modifier = 50 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_CPS_poverty = 0.075 }
			JAP = {
				add_to_variable = { BFI_JAP_poverty = 0.025 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^12 = 5 } }
			set_temp_variable = { temp_modifier = 60 }
			JAP = { add_to_trade_modifier_PREV = yes }
			JAP = { gng = { add_to_trade_modifier_PREV = yes } }
			add_to_variable = { BFI_CPS_poverty = 0.1 }
			JAP = {
				add_to_variable = { BFI_JAP_poverty = 0.05 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^13 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^13 = 1 } }
			add_to_variable = { BFI_CPS_research_speed = 0.01 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^13 = 2 } }
			add_to_variable = { BFI_CPS_research_speed = 0.02 }
			add_to_variable = { BFI_CPS_research_facilities = 0.5 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^13 = 3 } }
			add_to_variable = { BFI_CPS_research_speed = 0.03 }
			add_to_variable = { BFI_CPS_research_facilities = 1 }
			random_state = {
				limit = { nuclear_reactor < 5 }
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^13 = 4 } }
			add_to_variable = { BFI_CPS_research_speed = 0.04 }
			add_to_variable = { BFI_CPS_research_facilities = 1.5 }
			random_state = {
				limit = { nuclear_reactor < 5 }
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = { nuclear_reactor < 5 }
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
			}
			JAP = {
				add_to_variable = { BFI_JAP_research_facilities = 0.5 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^13 = 5 } }
			add_to_variable = { BFI_CPS_research_speed = 0.05 }
			add_to_variable = { BFI_CPS_research_facilities = 2 }
			random_state = {
				limit = { nuclear_reactor < 5 }
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = { nuclear_reactor < 5 }
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = { nuclear_reactor < 5 }
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
			}
			JAP = {
				add_to_variable = { BFI_JAP_research_facilities = 1 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^14 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^14 = 1 } }
			add_to_variable = { BFI_CPS_xp_gain = 0.1 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^14 = 2 } }
			add_to_variable = { BFI_CPS_xp_gain = 0.2 }
			add_to_variable = { BFI_CPS_navy_org = 0.05 }
			JAP = {
				add_to_variable = { BFI_JAP_navy_org = 0.05 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^14 = 3 } }
			add_to_variable = { BFI_CPS_xp_gain = 0.3 }
			add_to_variable = { BFI_CPS_navy_org = 0.1 }
			JAP = {
				add_to_variable = { BFI_JAP_navy_org = 0.1 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^14 = 4 } }
			add_to_variable = { BFI_CPS_xp_gain = 0.4 }
			add_to_variable = { BFI_CPS_navy_org = 0.15 }
			JAP = {
				add_to_variable = { BFI_JAP_navy_org = 0.15 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^14 = 5 } }
			add_to_variable = { BFI_CPS_xp_gain = 0.5 }
			add_to_variable = { BFI_CPS_navy_org = 0.2 }
			JAP = {
				add_to_variable = { BFI_JAP_navy_org = 0.2 }
			}
		}
	}
	if = {
		limit = { check_variable = { JAP.BFI_investment_selected^15 > 0 } }
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^15 = 1 } }
			add_to_variable = { BFI_CPS_encryption_factor = 0.02 }
			add_to_variable = { BFI_CPS_decryption_factor = 0.02 }
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^15 = 2 } }
			add_to_variable = { BFI_CPS_encryption_factor = 0.04 }
			add_to_variable = { BFI_CPS_decryption_factor = 0.04 }
			add_to_variable = { BFI_CPS_recon = 0.05 }
			JAP = {
				add_to_variable = { BFI_CPS_encryption_factor = 0.02 }
				add_to_variable = { BFI_CPS_decryption_factor = 0.01 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^15 = 3 } }
			add_to_variable = { BFI_CPS_encryption_factor = 0.06 }
			add_to_variable = { BFI_CPS_decryption_factor = 0.06 }
			add_to_variable = { BFI_CPS_recon = 0.1 }
			JAP = {
				add_to_variable = { BFI_CPS_encryption_factor = 0.04 }
				add_to_variable = { BFI_CPS_decryption_factor = 0.02 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^15 = 4 } }
			add_to_variable = { BFI_CPS_encryption_factor = 0.08 }
			add_to_variable = { BFI_CPS_decryption_factor = 0.08 }
			add_to_variable = { BFI_CPS_recon = 0.15 }
			JAP = {
				add_to_variable = { BFI_CPS_encryption_factor = 0.06 }
				add_to_variable = { BFI_CPS_decryption_factor = 0.03 }
			}
		}
		if = {
			limit = { check_variable = { JAP.BFI_investment_selected^15 = 5 } }
			add_to_variable = { BFI_CPS_encryption_factor = 0.1 }
			add_to_variable = { BFI_CPS_decryption_factor = 0.1 }
			add_to_variable = { BFI_CPS_recon = 0.2 }
			JAP = {
				add_to_variable = { BFI_CPS_encryption_factor = 0.08 }
				add_to_variable = { BFI_CPS_decryption_factor = 0.04 }
			}
		}
	}

	add_dynamic_modifier = { modifier = BFI_gng_in_the_CPS }
	JAP = { add_dynamic_modifier = { modifier = BFI_JAP_gng_in_the_CPS } }
	force_update_dynamic_modifier = yes
}

# Must be called from gng scope
BFI_gng_keeps_to_itself = {
	chi = {
		set_temp_variable = { Victory_ID = 6 }
		set_temp_variable = { Victory_Outcome = 3 }
		set_temp_variable = { Victory_Points = 0 }
		Cold_War_GUI_ManipulateVictory = yes
	}
	JAP = {
		set_temp_variable = { Victory_ID = 6 }
		set_temp_variable = { Victory_Outcome = 3 }
		set_temp_variable = { Victory_Points = 0 }
		Cold_War_GUI_ManipulateVictory = yes
	}
	set_variable = { BFI_gng_pp_gain = 0 }
	set_variable = { BFI_gng_opinion_gain = 0 }
	set_variable = { BFI_gng_min_export = 0 }
	set_variable = { BFI_gng_monthly_population = 0 }
	set_variable = { BFI_gng_trade_opinion = 0 }
	set_variable = { BFI_gng_research_speed = 0 }
	set_variable = { BFI_gng_consumer_goods = 0 }
	set_variable = { BFI_gng_drift_defence = 0 }
	set_variable = { BFI_gng_encryption_factor = 0 }
	set_variable = { BFI_gng_max_planning = 0 }
	set_variable = { BFI_gng_planning_speed = 0 }
	set_variable = { BFI_gng_invasion_preparation = 0 }
	set_variable = { BFI_gng_xp_gain = 0 }
	set_variable = { BFI_gng_misc_income = 0 }
	if = {
		limit = { check_variable = { BFI_investment_selected^1 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^1 = 1 } }
			subtract_from_variable = { BFI_gng_pp_gain = 0.1 }
			subtract_from_variable = { BFI_gng_opinion_gain = 0.1 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^1 = 2 } }
			add_to_variable = { BFI_gng_opinion_gain = 0.1 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^1 = 3 } }
			add_to_variable = { BFI_gng_pp_gain = 0.1 }
			add_to_variable = { BFI_gng_opinion_gain = 0.3 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^1 = 4 } }
			add_to_variable = { BFI_gng_pp_gain = 0.2 }
			add_to_variable = { BFI_gng_opinion_gain = 0.5 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^1 = 5 } }
			add_to_variable = { BFI_gng_pp_gain = 0.3 }
			add_to_variable = { BFI_gng_opinion_gain = 0.7 }
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^2 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^2 = 1 } }
			subtract_from_variable = { BFI_gng_min_export = 0.05 }
			subtract_from_variable = { industrial_equipment_monthly_change = 0.5 }
			custom_effect_tooltip = worsen_industrial_equipment_small
			subtract_from_variable = { industrial_expertise_monthly_change = 0.5 }
			custom_effect_tooltip = worsen_industrial_expertise_small
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^2 = 2 } }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^2 = 3 } }
			add_to_variable = { BFI_gng_min_export = 0.05 }
			add_to_variable = { industrial_equipment_monthly_change = 0.5 }
			custom_effect_tooltip = improve_industrial_equipment_small
			subtract_from_variable = { industrial_expertise_monthly_change = 0.5 }
			custom_effect_tooltip = improve_industrial_expertise_small
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^2 = 4 } }
			add_to_variable = { BFI_gng_min_export = 0.10 }
			add_to_variable = { industrial_equipment_monthly_change = 1 }
			custom_effect_tooltip = improve_industrial_equipment_small
			subtract_from_variable = { industrial_expertise_monthly_change = 1 }
			custom_effect_tooltip = improve_industrial_expertise_small
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^2 = 5 } }
			add_to_variable = { BFI_gng_min_export = 0.15 }
			add_to_variable = { industrial_equipment_monthly_change = 2 }
			custom_effect_tooltip = improve_industrial_equipment_medium
			subtract_from_variable = { industrial_expertise_monthly_change = 2 }
			custom_effect_tooltip = improve_industrial_expertise_medium
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^3 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^3 = 1 } }
			subtract_from_variable = { BFI_gng_monthly_population = 0.01 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^3 = 2 } }
			add_to_variable = { BFI_gng_monthly_population = 0.005 }
			add_to_variable = { BFI_gng_misc_income = 0.05 } #already converted to billion
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^3 = 3 } }
			add_to_variable = { BFI_gng_monthly_population = 0.02 }
			add_to_variable = { BFI_gng_misc_income = 0.1 } #already converted to billion
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^3 = 4 } }
			add_to_variable = { BFI_gng_monthly_population = 0.035 }
			add_to_variable = { BFI_gng_misc_income = 0.15 } #already converted to billion
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^3 = 5 } }
			add_to_variable = { BFI_gng_monthly_population = 0.05 }
			add_to_variable = { BFI_gng_misc_income = 0.2 } #already converted to billion
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^4 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^4 = 1 } }
			custom_effect_tooltip = worsen_industrial_expertise_small
			subtract_from_variable = { industrial_expertise_monthly_change = 0.5 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^4 = 2 } }
			# https://www.youtube.com/watch?v=M5QGkOGZubQ
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^4 = 3 } }
			TNO_improve_industrial_expertise_low = yes
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^4 = 4 } }
			TNO_improve_industrial_expertise_low = yes
			multiply_variable = { GDP = 1.005 } #already converted to billion
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^4 = 5 } }
			TNO_improve_industrial_expertise_med = yes
			set_temp_variable = { gdp_growth_temp = 0.10 }
			econ_gdp_growth_change = yes
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^5 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^5 = 1 } }
			subtract_from_variable = { BFI_gng_research_speed = 0.03 }
			add_to_variable = { BFI_gng_pp_gain = 0.1 }
			TNO_worsen_academic_base_low = yes
			TNO_worsen_research_facilities_low = yes
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^5 = 2 } }
			add_to_variable = { BFI_gng_pp_gain = 0.05 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^5 = 3 } }
			add_to_variable = { BFI_gng_research_speed = 0.03 }
			custom_effect_tooltip = improve_academic_base_small
			add_to_variable = { academic_base_monthly_change = 0.5 }
			custom_effect_tooltip = improve_research_facilities_small
			add_to_variable = { research_facilities_monthly_change = 0.5 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^5 = 4 } }
			subtract_from_variable = { BFI_gng_pp_gain = 0.05 }
			add_to_variable = { BFI_gng_research_speed = 0.06 }
			TNO_improve_academic_base_low = yes
			TNO_improve_research_facilities_low = yes
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^5 = 5 } }
			subtract_from_variable = { BFI_gng_pp_gain = 0.1 }
			add_to_variable = { BFI_gng_research_speed = 0.09 }
			custom_effect_tooltip = improve_academic_base_small
			add_to_variable = { academic_base_monthly_change = 1.5 }
			custom_effect_tooltip = improve_research_facilities_small
			add_to_variable = { research_facilities_monthly_change = 1.5 }
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^6 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^6 = 1 } }
			TNO_worsen_agriculture_med = yes
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^6 = 2 } }
			TNO_worsen_agriculture_low = yes
			add_to_variable = { poverty_monthly_change = 0.02 }
			custom_effect_tooltip = improve_poverty_small
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^6 = 3 } }
			add_to_variable = { poverty_monthly_change = 0.02 }
			custom_effect_tooltip = improve_poverty_small
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^6 = 4 } }
			TNO_improve_agriculture_low = yes
			add_to_variable = { poverty_monthly_change = 0.04 }
			custom_effect_tooltip = improve_poverty_small
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^6 = 5 } }
			TNO_improve_agriculture_med = yes
			add_to_variable = { poverty_monthly_change = 0.06 }
			custom_effect_tooltip = improve_poverty_medium
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^7 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^7 = 1 } }
			subtract_from_variable = { BFI_gng_min_export = 0.05 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^7 = 2 } }
			subtract_from_variable = { BFI_gng_consumer_goods = 0.01 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^7 = 3 } }
			subtract_from_variable = { BFI_gng_consumer_goods = 0.02 }
			add_to_variable = { BFI_gng_min_export = 0.05 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^7 = 4 } }
			subtract_from_variable = { BFI_gng_consumer_goods = 0.03 }
			add_to_variable = { BFI_gng_min_export = 0.10 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^7 = 5 } }
			subtract_from_variable = { BFI_gng_consumer_goods = 0.05 }
			add_to_variable = { BFI_gng_min_export = 0.20 }
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^8 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^8 = 1 } }
			subtract_from_variable = { BFI_gng_trade_opinion = 0.1 }
			add_to_variable = { BFI_gng_drift_defence = 0.25 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^8 = 2 } }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^8 = 3 } }
			add_to_variable = { BFI_gng_trade_opinion = 0.1 }
			subtract_from_variable = { BFI_gng_drift_defence = 0.05 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^8 = 4 } }
			add_to_variable = { BFI_gng_trade_opinion = 0.2 }
			subtract_from_variable = { BFI_gng_drift_defence = 0.1 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^8 = 5 } }
			add_to_variable = { BFI_gng_trade_opinion = 0.25 }
			subtract_from_variable = { BFI_gng_drift_defence = 0.25 }
			add_to_variable = { BFI_gng_pp_gain = 0.1 }
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^9 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^9 = 1 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				set_temp_variable = { gdp_growth_temp = -0.10 }
				econ_gdp_growth_change = yes
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^9 = 2 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				custom_effect_tooltip = improve_industrial_expertise_small
				add_to_variable = { industrial_expertise_monthly_change = 0.5 }
				custom_effect_tooltip = improve_industrial_equipment_small
				add_to_variable = { industrial_equipment_monthly_change = 0.5 }
				custom_effect_tooltip = improve_poverty_small
				add_to_variable = { poverty_monthly_change = 0.02 }
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^9 = 3 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				custom_effect_tooltip = improve_industrial_expertise_small
				add_to_variable = { industrial_expertise_monthly_change = 1 }
				custom_effect_tooltip = improve_industrial_equipment_small
				add_to_variable = { industrial_equipment_monthly_change = 1 }
				custom_effect_tooltip = improve_poverty_small
				add_to_variable = { poverty_monthly_change = 0.03 }
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^9 = 4 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				custom_effect_tooltip = improve_industrial_expertise_small
				add_to_variable = { industrial_expertise_monthly_change = 1.5 }
				custom_effect_tooltip = improve_industrial_equipment_small
				add_to_variable = { industrial_equipment_monthly_change = 1.5 }
				custom_effect_tooltip = improve_poverty_small
				add_to_variable = { poverty_monthly_change = 0.04 }
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^9 = 5 } }
			every_country = {
				limit = {
					is_subject_of = gng
				}
				custom_effect_tooltip = improve_industrial_expertise_medium
				add_to_variable = { industrial_expertise_monthly_change = 2 }
				custom_effect_tooltip = improve_industrial_equipment_medium
				add_to_variable = { industrial_equipment_monthly_change = 2 }
				custom_effect_tooltip = improve_poverty_medium
				add_to_variable = { poverty_monthly_change = 0.05 }
			}
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^10 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^10 = 1 } }
			add_to_variable = { BFI_gng_encryption_factor = 0.05 }
			subtract_from_variable = { BFI_gng_max_planning = 0.04 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^10 = 2 } }
			add_to_variable = { BFI_gng_planning_speed = 0.03 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^10 = 3 } }
			subtract_from_variable = { BFI_gng_encryption_factor = 0.05 }
			add_to_variable = { BFI_gng_max_planning = 0.04 }
			add_to_variable = { BFI_gng_planning_speed = 0.06 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^10 = 4 } }
			subtract_from_variable = { BFI_gng_encryption_factor = 0.1 }
			add_to_variable = { BFI_gng_max_planning = 0.08 }
			add_to_variable = { BFI_gng_planning_speed = 0.09 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^10 = 5 } }
			subtract_from_variable = { BFI_gng_encryption_factor = 0.15 }
			add_to_variable = { BFI_gng_max_planning = 0.12 }
			add_to_variable = { BFI_gng_planning_speed = 0.12 }
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^11 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^11 = 1 } }
			add_to_variable = { BFI_gng_heat_attrition = 0.05 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^11 = 2 } }
			add_tech_bonus = {
				name = infantry_weapons
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^11 = 3 } }
			add_tech_bonus = {
				name = infantry_weapons
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = MBT
				bonus = 0.5
				uses = 1
				category = MBT
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^11 = 4 } }
			add_tech_bonus = {
				name = infantry_weapons
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = MBT
				bonus = 0.5
				uses = 1
				category = MBT
			}
			add_to_variable = { BFI_gng_industrial_capacity = 0.05 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^11 = 5 } }
			add_tech_bonus = {
				name = infantry_weapons
				bonus = 1
				uses = 1
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = MBT
				bonus = 1
				uses = 1
				category = MBT
			}
			add_to_variable = { BFI_gng_industrial_capacity = 0.1 }
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^12 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^12 = 1 } }
			subtract_from_variable = { BFI_gng_min_export = 0.2 }
			subtract_from_variable = { BFI_gng_trade_opinion = 0.2 }
			set_temp_variable = { gdp_growth_temp = -0.10 }
			econ_gdp_growth_change = yes
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^12 = 2 } }
			subtract_from_variable = { BFI_gng_min_export = 0.1 }
			subtract_from_variable = { BFI_gng_trade_opinion = 0.1 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^12 = 3 } }
			set_temp_variable = { gdp_growth_temp = 0.10 }
			econ_gdp_growth_change = yes
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^12 = 4 } }
			add_to_variable = { BFI_gng_min_export = 0.1 }
			add_to_variable = { BFI_gng_trade_opinion = 0.2 }
			set_temp_variable = { gdp_growth_temp = 0.10 }
			econ_gdp_growth_change = yes
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^12 = 5 } }
			set_temp_variable = { gdp_growth_temp = 0.10 }
			econ_gdp_growth_change = yes
			add_to_variable = { BFI_gng_min_export = 0.2 }
			add_to_variable = { BFI_gng_trade_opinion = 0.25 }
			TNO_improve_poverty_low = yes
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^13 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^13 = 1 } }
			subtract_from_variable = { BFI_gng_research_speed = 0.01 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^13 = 2 } }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^13 = 3 } }
			add_to_variable = { BFI_gng_research_speed = 0.01 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^13 = 4 } }
			add_to_variable = { BFI_gng_research_speed = 0.02 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^13 = 5 } }
			add_to_variable = { BFI_gng_research_speed = 0.03 }
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^14 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^14 = 1 } }
			add_to_variable = { BFI_gng_invasion_preparation = 0.5 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^14 = 2 } }
			add_to_variable = { BFI_gng_invasion_preparation = 0.25 }
			add_to_variable = { BFI_gng_xp_gain = 0.01 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^14 = 3 } }
			add_to_variable = { BFI_gng_xp_gain = 0.03 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^14 = 4 } }
			subtract_from_variable = { BFI_gng_invasion_preparation = 0.25 }
			add_to_variable = { BFI_gng_xp_gain = 0.04 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^14 = 5 } }
			subtract_from_variable = { BFI_gng_invasion_preparation = 0.5 }
			add_to_variable = { BFI_gng_xp_gain = 0.05 }
		}
	}
	if = {
		limit = { check_variable = { BFI_investment_selected^15 > 0 } }
		if = {
			limit = { check_variable = { BFI_investment_selected^15 = 1 } }
			add_to_variable = { BFI_gng_encryption_factor = 0.1 }
			subtract_from_variable = { BFI_gng_decryption_factor = 0.1 }
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^15 = 2 } }
			add_to_variable = { BFI_gng_encryption_factor = 0.05 }
			subtract_from_variable = { BFI_gng_decryption_factor = 0.05 }
			965 = { # Suez
				if = {
					limit = { radar_station < 6 }
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^15 = 3 } }
			965 = { # Suez
				if = {
					limit = { radar_station < 6 }
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
			}
			656 = { # Kuwait
				if = {
					limit = { radar_station < 6 }
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
			}
			39 = { # Trent
				if = {
					limit = { radar_station < 6 }
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^15 = 4 } }
			subtract_from_variable = { BFI_gng_encryption_factor = 0.05 }
			add_to_variable = { BFI_gng_decryption_factor = 0.05 }
			965 = { # Suez
				if = {
					limit = { radar_station < 5 }
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes
					}
				}
			}
			656 = { # Kuwait
				if = {
					limit = { radar_station < 5 }
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes
					}
				}
			}
			39 = { # Trent
				if = {
					limit = { radar_station < 5 }
					add_building_construction = {
						type = radar_station
						level = 2
						instant_build = yes
					}
				}
			}
		}
		if = {
			limit = { check_variable = { BFI_investment_selected^15 = 5 } }
			subtract_from_variable = { BFI_gng_encryption_factor = 0.1 }
			add_to_variable = { BFI_gng_decryption_factor = 0.1 }
			965 = { # Suez
				if = {
					limit = { radar_station < 4 }
					add_building_construction = {
						type = radar_station
						level = 3
						instant_build = yes
					}
				}
			}
			656 = { # Kuwait
				if = {
					limit = { radar_station < 4 }
					add_building_construction = {
						type = radar_station
						level = 3
						instant_build = yes
					}
				}
			}
			39 = { # Trent
				if = {
					limit = { radar_station < 4 }
					add_building_construction = {
						type = radar_station
						level = 3
						instant_build = yes
					}
				}
			}
		}
	}

	add_dynamic_modifier = { modifier = BFI_gng_all_alone }
}

